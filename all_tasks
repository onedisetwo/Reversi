#include <iostream>
#include <vector>
#include <string>

/*первая коорд. - буква, вторая цифра. т.е.
5 - - - - -
4 - - - - -
3 - - - - -
2 - - - - -
1 - - - - -
- A B C D E
*/

using namespace std;

short changePl(short player){ //Смена игрока
    if(player==1)
        return 2;
    else
        return 1;
}

class coord{
    public:
    short x,y;
    void input(){
        string s;
        cin>>s;
        x=(int)(s[0])-64;
        y=(int)(s[1])-48;
    }
    void set(short a, short b){
        x=a;
        y=b;
    }
};

class board{
public:
    vector<vector<short> > board;

    void start(){ //Изменение размера и заполнение до стартовой позиции
        board.resize(9);
        for(int i=0;i<9;i++){
            board[i].resize(9);
            for(int k=0;k<9;k++){
                board[i][k]=0;
                if(i==4 & k==4 || i==5 & k==5){
                    board[i][k]=1;
                }
                if(i==5 & k==4 || i==4 & k==5){
                    board[i][k]=2;
                }
            }
        }
    }

    void input(){ //Ввод доски
        for(int i=1;i<9;i++){
            string s;
            cin>>s;
            for(int k=1;k<9;k++){
                board[k][9-i]=(int)(s[k-1])-48;
            }
        }
    }

    short get(coord a){ //Получить значение поля доски
        return board[a.x][a.y];
    }

    void print(){ //Напечатать доску
        cout<<endl;
        for(int i=1;i<9;i++){
            for(int k=1;k<9;k++){
                cout<<board[k][9-i];
            }
            cout<<endl;
        }
    }

    vector<short> wincheck_3(){ //Проверка выигрыша: победитель, кол-во черных, кол-во белых
        vector<short> v(3,0);
        for(int i=1;i<9;i++){
            for(int k=1;k<9;k++){
                v[board[i][k]]++;
            }
        }
        if(v[1]==0) return {2,0,v[2]}; //0 - ничья
        if(v[2]==0) return {1,v[1],0};
        if(v[0]!=0) return {-1,v[1],v[2]}; //-1 - игра не окончена
        if(v[1]>v[2]) v[0]=1;
        if(v[2]>v[1]) v[0]=2;
        if(v[1]==v[2]) v[0]=0;
        return v;
    }

    short wincheck_p(){ //Проверка выигрыщша: победитель
        return wincheck_3()[0];
    }

    vector<bool> vecIsMovePossible(coord a,short player){ //Возможность хода в клетку и в какой стороне он окажет влияние
        /*- - - - -
          - 2 3 4 -
          - 1 X 5 -
          - 0 7 6 -
          - - - - -*/
        short y=a.x,x=a.y;
        vector<bool> v(8,0);
        if(board[y][x]!=0)
            return v;
        if(y>0 && x>0)
        if(v[0]==0 && board[y-1][x-1]==changePl(player)){
            for(int i=2;y-i>0 && x-i>0;i++){
                if(board[y-i][x-i]==0){
                    break;
                }
                if(board[y-i][x-i]==player){
                    v[0]=1;
                    break;
                }
            }
        }
        if(y>0)
        if(v[1]==0 && board[y-1][x]==changePl(player)){
            for(int i=2;y-i>0;i++){
                if(board[y-i][x]==0){
                    break;
                }
                if(board[y-i][x]==player){
                    v[1]=1;
                    break;
                }
            }
        }
        if(y>0 && x+1<=8)
        if(v[2]==0 && board[y-1][x+1]==changePl(player)){
            for(int i=2;y-i>0 && x+i<=8;i++){
                if(board[y-i][x+i]==0){
                    break;
                }
                if(board[y-i][x+i]==player){
                    v[2]=1;
                    break;
                }
            }
        }
        if(x+1<=8)
        if(v[3]==0 && board[y][x+1]==changePl(player)){
            for(int i=2;x+i<=8;i++){
                if(board[y][x+i]==0){
                    break;
                }
                if(board[y][x+i]==player){
                    v[3]=1;
                    break;
                }
            }
        }
        if(y+1<=8 && x+1<=8)
        if(v[4]==0 && board[y+1][x+1]==changePl(player)){
            for(int i=2;y+i<=8 && x+i<=8;i++){
                if(board[y+i][x+i]==0){
                    break;
                }
                if(board[y+i][x+i]==player){
                    v[4]=1;
                    break;
                }
            }
        }
        if(y+1<=8)
        if(v[5]==0 && board[y+1][x]==changePl(player)){
            for(int i=2;y+i<=8;i++){
                //cout<<board[y+i][x];
                if(board[y+i][x]==0){
                    break;
                }
                if(board[y+i][x]==player){
                    v[5]=1;
                    break;
                }
            }
        }
        if(y+1<=8 && x>0)
        if(v[6]==0 && board[y+1][x-1]==changePl(player)){
            for(int i=2;y+i<=8 && x-i>0;i++){
                if(board[y+i][x-i]==0){
                    break;
                }
                if(board[y+i][x-i]==player){
                    v[6]=1;
                    break;
                }
            }
        }
        if(x>0)
        if(v[7]==0 && board[y][x-1]==changePl(player)){
            for(int i=2;x-i>0;i++){
                if(board[y][x-i]==0){
                    break;
                }
                if(board[y][x-i]==player){
                    v[7]=1;
                    break;
                }
            }
        }
        return v;
    }

    bool isMovePossible(coord c,short player){ //Можно ли сделать ход в данную клетку
        vector<bool> v=vecIsMovePossible(c,player);
        for(auto i:v){
            if(i==true)
                return true;
        }
        return false;
    }

    bool ksgchanger(coord a,short player,coord da){ //Вспомогательная функция для change(...)
        if(board[a.x][a.y]!=player){
            board[a.x][a.y]=player;
            ksgchanger({a.x+da.x,a.y+da.y},player,da);
        }
        if(board[a.x][a.y]==player)
            return 0;
    }

    void change(coord a,short player){ //Изменение доски после хода
        vector<bool> v=vecIsMovePossible(a,player);
        vector<coord> cov={{-1,-1},{-1,0},{-1,1},{0,1},{1,1},{1,0},{1,-1},{0,-1}};
        for(int i=0;i<8;i++){
            if(v[i]!=0){
                ksgchanger(a,player,cov[i]);
                board[a.x][a.y]=changePl(player);
            }
        }
        board[a.x][a.y]=player;
    }

    vector<coord> moveVariants(short player){ //Варианты хода из заданного положения
        vector<coord> v;
        for(short i=1;i<9;i++){
            for(short k=1;k<9;k++){
                if(isMovePossible({i,k},player)==true){
                    v.push_back({i,k});
                }
            }
        }
        return v;
    }
};

board b1,b2;

string toStr(coord a){ //Перевод координат в запись #A1
    string s;
    s+=(char)(a.x+64);
    s+=(char)(a.y+48);
    return s;
}

///Задания

void task1(){ //Задание 1
    b1.input();
    int s=0;
    for(int i=1;i<9;i++){
        for(int k=1;k<9;k++){
            if(b1.board[i][k]!=0){
                s++;
            }
        }
    }
    cout<<s-4;
}

void task2(){ //Задание 2
    b1.input();
    for(auto i:b1.wincheck_3()){
        cout<<i<<" ";
    }
}

void task3(){ //Задание 3
    short player;
    b1.input();
    cin>>player;
    b2.input();
    cin>>player;
    coord c={0,0};
    for(int i=1;i<9;i++){
        for(int k=1;k<9;k++){
            if(b1.board[i][k]==0 && b2.board[i][k]!=0){
                c.set(i,k);
                i=9;
                break;
            }
        }
    }
    if(c.x==0){
        cout<<0;
        return  ;
    }
    b1.change(c,player);
    if(b1.board==b2.board){
        cout<<toStr(c);
    }
    else
        cout<<0;
}

void task4(){ //Задание 4
    coord c;
    short player;
    b1.input();
    cin>>player;
    c.input();
    if(b1.isMovePossible(c,changePl(player))!=0){
        player=changePl(player);
        b1.change(c,player);
    }
    b1.print();
    cout<<player;
}

void task5(){ //Задание 5
    b1.input();
    short player;
    cin>>player;
    vector<coord> v=b1.moveVariants(changePl(player));
    cout<<changePl(player)<<endl<<v.size()<<endl;
    for(auto i:v){
        cout<<toStr(i)<<" ";
    }
}

void task6(){ //Задание 6
    b1.input();
    short player;
    vector<coord> v;
    int p=-1;
    cin>>player;
    for(auto i:b1.moveVariants(changePl(player))){
        if(b1.isMovePossible(i,changePl(player))==0){
            continue;
        }
        board b=b1;
        b.change(i,changePl(player));
        if(b.wincheck_p()==changePl(player)){
            p=b.wincheck_p();
            v.push_back(i);
        }
    }
    if(v.size()==0){
        player=changePl(player);
        for(auto i:b1.moveVariants(changePl(player))){
            if(b1.isMovePossible(i,changePl(player))==0){
                continue;
            }
            board b=b1;
            b.change(i,changePl(player));
            if(b.wincheck_p()==changePl(player)){
                p=b.wincheck_p();
                v.push_back(i);
            }
        }
    }
    if(p>0){
        cout<<p<<endl;
        for(auto i:v){
            cout<<toStr(i)<<" ";
        }
    }
    else
        cout<<0;
}

void task_switch(short task_number){ //Выбор заданий
    switch(task_number){
    case 1: //+
        task1();
        break;
    case 2: //+
        task2();
        break;
    case 3: //+
        task3();
        break;
    case 4: //+
        task4();
        break;
    case 5: //+
        task5();
        break;
    case 6: //+
        task6();
        break;
    default:
        cout<<"Not yet";
        break;
    }
}

int main()
{
    short task_number,player;
    b1.start();
    b2.start();
    cout<<"Task number: ";
    cin>>task_number;
    task_switch(task_number);
}
